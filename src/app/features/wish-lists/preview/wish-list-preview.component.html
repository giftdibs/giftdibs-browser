<gd-card>
  <gd-card-header>
    <gd-card-heading>
      <gd-icon icon="list-alt"></gd-icon>
      {{ wishList.name }}
    </gd-card-heading>
    <gd-card-controls *ngIf="isSessionUser">
      <button
        class="gd-button gd-button-link gd-text-deemphasized"
        title="Toggle wish list options"
        type="button"
        gdDropdownMenuTrigger
        [menuItems]="menuItems"
        #dropdownTrigger
      >
        <gd-icon icon="ellipsis-v"></gd-icon>
      </button>
    </gd-card-controls>
  </gd-card-header>
  <gd-card-body *ngIf="wishList.gifts">
    <gd-repeater>
      <gd-repeater-item *ngFor="let gift of wishList.gifts">
        <a
          [ngClass]="{
            'gd-wish-list-preview-gift-received': gift.isReceived,
            'gd-text-deemphasized': gift.isReceived
          }"
          [routerLink]="[]"
          [queryParams]="{ giftId: gift._id }"
        >{{ gift.name }}
          <ng-template [ngIf]="gift.quantity > 1">
            ({{ gift.quantity }})
          </ng-template>
        </a>
        <gd-icon *ngIf="gift.dibs && gift.dibs.length" icon="check"></gd-icon>
        <gd-repeater-controls *ngIf="isSessionUser">
          <button
            class="gd-button gd-button-link gd-text-deemphasized"
            title="Toggle gift options"
            type="button"
            gdDropdownMenuTrigger
            [menuItems]="getGiftDropdownMenuItems(gift)"
          >
            <gd-icon icon="ellipsis-v"></gd-icon>
          </button>
        </gd-repeater-controls>
      </gd-repeater-item>
    </gd-repeater>
  </gd-card-body>
  <gd-card-footer *ngIf="isSessionUser">
    <button
      class="gd-button gd-button-block gd-button-default"
      type="button"
      (click)="openGiftEditModal()"
      #addGiftButton
    >
      Add item...
    </button>
  </gd-card-footer>
  <pre>{{wishList|json}}</pre>
</gd-card>
