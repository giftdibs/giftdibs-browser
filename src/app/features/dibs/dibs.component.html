<div class="gd-container-fluid gd-canvas">
  <h1>
    Dibs
  </h1>

  <gd-repeater *ngIf="recipients">
    <gd-repeater-item *ngFor="let recipient of recipients">
      <gd-card>
        <gd-card-header>
          <gd-card-heading>
            <gd-media>
              <gd-media-thumbnail>
                <gd-thumbnail
                  size="xs"
                  type="user"
                  [imageSource]="recipient.avatarUrl"
                >
                </gd-thumbnail>
              </gd-media-thumbnail>
              <gd-media-body>
                <gd-media-header>
                  {{ recipient.firstName }} {{ recipient.lastName }}
                </gd-media-header>
              </gd-media-body>
            </gd-media>
          </gd-card-heading>
        </gd-card-header>
        <gd-card-body>
          <ng-template ngFor let-wishList [ngForOf]="recipient.wishLists">
            <gd-repeater>
              <gd-repeater-item *ngFor="let gift of wishList.gifts">
                <gd-row>
                  <gd-column screenSmall="5">
                    <gd-gift-preview
                      [gift]="gift"
                      [wishList]="wishList"
                    >
                    </gd-gift-preview>
                  </gd-column>
                  <gd-column screenSmall="5">
                    <pre>{{gift.dibs[0]|json}}</pre>
                    <!-- <table>
                      <thead>
                        <tr>
                          <th>Quantity</th>
                          <th>Price paid</th>
                          <th>Anonymous</th>
                          <th>Notes</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            {{ gift.dibs[0].quantity }}
                          </td>
                          <td>
                            ${{ gift.dibs[0].pricePaid }} ea.
                          </td>
                          <td>
                            {{ gift.dibs[0].isAnonymous }}
                          </td>
                          <td>
                            {{ gift.dibs[0].notes }}
                          </td>
                        </tr>
                      </tbody>
                    </table> -->
                  </gd-column>
                  <gd-column screenSmall="2">
                    <gd-dib-controls
                      [gift]="gift"
                      (change)="onDibChange()"
                    >
                    </gd-dib-controls>
                  </gd-column>
                </gd-row>
              </gd-repeater-item>
            </gd-repeater>
          </ng-template>
        </gd-card-body>
        <gd-card-footer>
          Totals for {{ recipient.firstName }}: ${{ recipient.budget }}
        </gd-card-footer>
      </gd-card>
    </gd-repeater-item>

    <pre>
{{recipients|json}}
    </pre>
    <!-- <gd-card *ngFor="let recipient of recipients">
      <gd-card-header>
        {{ recipient.firstName }} {{ recipient.lastName }}
      </gd-card-header>
      <gd-card-body *ngFor="let gift of recipient.gifts">
        <gd-row>
          <gd-column screenXSmall="6">
            <strong>{{ gift.name }}</strong><br>
            <a routerLink="/wish-lists/{{ gift._wishList.id }}">{{ gift._wishList.name }}</a><br>
            ${{ gift.budget }}
          </gd-column>
          <gd-column screenXSmall="6">
            [edit button]
            <div *ngIf="gift._dib.dateDelivered">
              Date delivered: {{ gift._dib.dateDelivered | date }}
            </div>
          </gd-column>
        </gd-row>
      </gd-card-body>
      <gd-card-footer>
        <gd-row>
          <gd-column screenXSmall="9">
            Totals for {{ recipient.firstName }}:
          </gd-column>
          <gd-column screenXSmall="3">
            ${{ recipient.budget }}
          </gd-column>
        </gd-row>
      </gd-card-footer>
    </gd-card> -->
  </gd-repeater>
</div>
